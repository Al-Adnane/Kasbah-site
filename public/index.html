<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kasbah â€“ Permission before action</title>
  <meta name="description" content="Kasbah adds a permission checkpoint to AI. Preview the action, understand the risk, allow or block. Born in Morocco." />

  <!-- PWA -->
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#1e1e1e">
  <link rel="icon" href="/icons/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/icons/icon.svg">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: #fffcf8;
      color: #1e1e1e;
      line-height: 1.6;
    }
    .wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 60px 24px;
    }
    h1, h2, h3 {
      font-weight: 700;
      letter-spacing: -0.01em;
    }
    h1 {
      font-size: clamp(44px, 8vw, 68px);
      line-height: 1.1;
      margin-bottom: 16px;
    }
    .subhead {
      font-size: 22px;
      color: #3e3e3e;
      font-weight: 400;
      max-width: 700px;
      margin: 0 auto 32px;
    }
    .flag {
      display: inline-block;
      background: #e6d9cc;
      color: #4c3b2b;
      padding: 6px 18px;
      border-radius: 40px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 24px;
      letter-spacing: 0.5px;
    }
    .btn {
      display: inline-block;
      background: #1e1e1e;
      color: white;
      font-weight: 600;
      padding: 16px 40px;
      border-radius: 40px;
      text-decoration: none;
      font-size: 18px;
      border: none;
      cursor: pointer;
      transition: 0.15s;
    }
    .btn:hover {
      background: #3a3a3a;
      transform: scale(0.98);
    }
    .btn-outline {
      background: transparent;
      border: 1.5px solid #1e1e1e;
      color: #1e1e1e;
    }
    .btn-outline:hover {
      background: #f0f0f0;
    }
    .card {
      background: #ffffff;
      border: 1px solid #ece7e2;
      border-radius: 32px;
      padding: 40px 32px;
      margin: 48px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.02);
    }
    .checkpoint-demo {
      background: #1a2e3c;
      color: white;
      border-radius: 24px;
      padding: 32px;
      margin: 32px 0;
    }
    .pill {
      display: inline-block;
      background: rgba(255,255,255,0.1);
      padding: 6px 16px;
      border-radius: 40px;
      font-size: 14px;
    }
    .install-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
      margin: 32px 0;
    }
    .install-card {
      background: #f8f6f4;
      border-radius: 20px;
      padding: 28px;
      border: 1px solid #e8e0d8;
    }
    .dev-note {
      background: #f3efeb;
      border-radius: 16px;
      padding: 24px;
      margin-top: 40px;
      border-left: 4px solid #b38b6d;
    }
    .footer {
      border-top: 1px solid #e0d8d0;
      margin-top: 60px;
      padding-top: 40px;
      color: #5e5e5e;
      font-size: 15px;
    }
    hr {
      border: none;
      border-top: 1px solid #e4ddd6;
      margin: 48px 0;
    }
    .trust-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: #ebdfd7;
      padding: 8px 20px;
      border-radius: 60px;
      font-size: 14px;
      font-weight: 500;
      color: #3a2e26;
    }
  </style>
  <!-- DEPLOY_MARKER: 2026-02-12-ROLLING -->
</head>
<body>
  <!-- HERO â€“ clear, confident, no hype -->
  <div class="wrap" style="text-align: center;">
    <span class="flag">ğŸ‡²ğŸ‡¦ BORN IN MOROCCO</span>
    <h1>AI should ask first.</h1>
    <p class="subhead">
      Kasbah adds a permission checkpoint to any AI.<br />
      You see the action. You approve it. Or you don't.
    </p>
    <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
      <a href="/dev.html" class="btn">â–¶ Run the live demo</a>
      <a href="#demo" class="btn btn-outline">â–¶ See how it works</a>
    </div>
    <div style="margin-top: 24px; color: #5c524a; font-size: 16px;">
      âš¡ Public beta begins Q2 2026 Â· No fake counters, just honest work
    </div>
  </div>

  <!-- THE CHECKPOINT â€“ clear visual demo (no simulation claims) -->
  <div class="wrap" id="demo">
    <div class="checkpoint-demo">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
        <span style="font-size: 24px; font-weight: 700;">ğŸ° Kasbah Checkpoint</span>
        <span class="pill" style="background: #fcd34d; color: #1e1e1e;">â¬¤ live preview</span>
      </div>

      <!-- AI action bubble -->
      <div style="background: #2a4450; border-radius: 24px 24px 24px 4px; padding: 24px; margin-bottom: 20px;">
        <div style="display: flex; gap: 16px; align-items: center;">
          <span style="font-size: 32px;">ğŸ¤–</span>
          <div>
            <div style="font-weight: 700; margin-bottom: 4px;">AI wants to</div>
            <div style="font-size: 20px;">Send email draft to client Â· Medium risk</div>
          </div>
        </div>
      </div>

      <!-- Permission card -->
      <div style="background: #1a2e3c; border: 1px solid #4d707a; border-radius: 20px; padding: 24px;">
        <div style="display: flex; gap: 20px; align-items: flex-start; flex-wrap: wrap;">
          <span style="font-size: 40px;">ğŸ›¡ï¸</span>
          <div style="flex: 1;">
            <div style="font-weight: 700; font-size: 18px; color: #fcd34d; margin-bottom: 8px;">Permission required</div>
            <div style="font-size: 18px; margin-bottom: 20px;">Outbound email to client@example.com Â· Approve wording before send?</div>
            <div style="display: flex; gap: 16px;">
              <span style="background: #2d6a4f; padding: 8px 28px; border-radius: 40px; font-weight: 600;">Allow</span>
              <span style="background: #9d174d; padding: 8px 28px; border-radius: 40px; font-weight: 600;">Block</span>
            </div>
          </div>
        </div>
      </div>
      <p style="color: #d0dde3; margin-top: 24px; font-size: 15px;">
        âš™ï¸ In production: single-use approvals, cryptographic enforcement, replay protection.
        <a href="/dev.html" style="color: #ffdba5; margin-left: 12px;">Run the live demo â†’</a>
      </p>
    </div>
  </div>

  <!-- HONEST WAITLIST â€“ stored locally until you wire a backend -->
  <div class="wrap" id="waitlist">
    <div class="card" style="text-align: center;">
      <span style="font-size: 48px; margin-bottom: 16px; display: block;">ğŸ“‹</span>
      <h2 style="font-size: 40px; margin-bottom: 16px;">Get early access</h2>
      <p style="font-size: 20px; color: #3e3e3e; max-width: 550px; margin: 0 auto 32px;">
        We're building Kasbah in public. Join the waitlist and be the first to know when we launch.
      </p>

      <form id="waitlist-form" action="#" method="POST" style="display: flex; gap: 16px; max-width: 500px; margin: 0 auto; flex-wrap: wrap; justify-content: center;">
        <input id="waitlist-email" type="email" name="email" placeholder="your@email.com" required style="flex: 1 1 240px; padding: 16px 24px; border-radius: 60px; border: 1px solid #c9c1b6; font-size: 16px; background: white;">
        <button type="submit" class="btn" style="background: #1e1e1e;">Join waitlist â†’</button>
      </form>

      <div id="waitlist-status" style="margin-top: 14px; color: #5c524a; font-size: 14px;"></div>

      <div style="display: flex; gap: 20px; justify-content: center; margin-top: 32px; color: #5c524a; flex-wrap: wrap;">
        <span style="display: flex; align-items: center; gap: 6px;">ğŸ“¨ No spam</span>
        <span style="display: flex; align-items: center; gap: 6px;">ğŸ”’ 1 email/month</span>
        <span style="display: flex; align-items: center; gap: 6px;">ğŸ• Unsubscribe anytime</span>
      </div>

      <div class="trust-badge" style="margin-top: 36px; background: #f2eae4;">
        <span>âœ“</span> We don't use fake counters or made-up stats. Trust is part of the product.
      </div>
    </div>
  </div>

  <!-- INSTALL â€“ REAL PWA + FIXED "DOWNLOAD" LINKS -->
  <div class="wrap">
    <h2 style="font-size: 32px; margin-bottom: 16px;">Use Kasbah today</h2>
    <p style="font-size: 18px; color: #4a4a4a; margin-bottom: 32px;">
      We ship through trusted channels. No sketchy downloads on the public landing page.
    </p>

    <div class="install-grid">
      <div class="install-card">
        <span style="font-size: 40px; margin-bottom: 12px; display: block;">ğŸ“±</span>
        <h3 style="font-size: 22px; margin-bottom: 12px;">Install as an App</h3>
        <p style="color: #4a4a4a; margin-bottom: 14px;">Works in your browser and installs like an app (PWA). No account needed.</p>

        <button id="pwa-install" class="btn" style="width: 100%; justify-content: center; display: none;">
          Install Kasbah
        </button>

        <div id="pwa-fallback" style="margin-top: 12px; background: #eae3dc; padding: 12px; border-radius: 12px; font-size: 14px;">
          ğŸ“² Safari: Share â†’ Add to Home Screen Â· Chrome: Install icon in the address bar
        </div>

        <div id="pwa-status" style="margin-top: 10px; color: #5c524a; font-size: 13px;"></div>
      </div>

      <div class="install-card">
        <span style="font-size: 40px; margin-bottom: 12px; display: block;">ğŸ§©</span>
        <h3 style="font-size: 22px; margin-bottom: 12px;">Chrome / Edge Extension</h3>
        <p style="color: #4a4a4a; margin-bottom: 14px;">Coming soon via the Chrome Web Store. We only ship through official stores.</p>
        <a href="#waitlist" class="btn btn-outline" style="padding: 12px 22px; font-size: 16px;">Notify me</a>
        <div style="margin-top: 12px;">
          <span style="background: #e0d8d0; padding: 6px 16px; border-radius: 40px; font-size: 14px;">ğŸ“¦ In review</span>
        </div>
      </div>

      <div class="install-card">
        <span style="font-size: 40px; margin-bottom: 12px; display: block;">ğŸ¦Š</span>
        <h3 style="font-size: 22px; margin-bottom: 12px;">Safari Extension</h3>
        <p style="color: #4a4a4a; margin-bottom: 14px;">Coming soon via Apple's distribution â€“ signed and trusted.</p>
        <a href="#waitlist" class="btn btn-outline" style="padding: 12px 22px; font-size: 16px;">Notify me</a>
        <div style="margin-top: 12px;">
          <span style="background: #e0d8d0; padding: 6px 16px; border-radius: 40px; font-size: 14px;">ğŸ Signed distribution required</span>
        </div>
      </div>
    </div>

    <div class="dev-note">
      <div style="display: flex; align-items: center; gap: 16px; flex-wrap: wrap;">
        <span style="font-size: 36px;">ğŸ§‘â€ğŸ’»</span>
        <div style="flex: 1;">
          <h3 style="font-size: 22px; margin-bottom: 6px;">Developer preview</h3>
          <p style="color: #4a4a4a; margin-bottom: 8px;">Run the live API demo: single-use tickets, replay protection, audit chain.</p>
          <a href="/dev.html" style="color: #1e1e1e; font-weight: 600; text-decoration: underline; text-underline-offset: 4px;">â†’ Open /dev.html (live demo)</a>
        </div>
      </div>
    </div>
  </div>

  <!-- ORIGIN STORY -->
  <div class="wrap" style="text-align: center; padding: 40px 20px;">
    <hr />
    <span style="font-size: 56px; display: block; margin-bottom: 16px;">ğŸœï¸</span>
    <h2 style="font-size: 40px; margin-bottom: 20px;">Born in Morocco. Trusted globally.</h2>
    <p style="font-size: 20px; color: #3a3a3a; max-width: 800px; margin: 0 auto;">
      Moroccan kasbahs protected cities through architecture, not rules. <br />Strong walls, clear gates, no bypass. <br /><strong>Kasbah brings that principle to AI.</strong>
    </p>
    <div style="display: flex; gap: 32px; justify-content: center; margin-top: 32px; color: #5c524a; font-weight: 500; flex-wrap: wrap;">
      <span>âš™ï¸ Open source</span>
      <span>ğŸ” Cryptographic audit</span>
      <span>ğŸ›ï¸ 13th century wisdom</span>
    </div>
  </div>

  <!-- GUARANTEES -->
  <div class="wrap" style="background: #fcf9f6; border-radius: 32px; padding: 48px 32px;">
    <h2 style="font-size: 32px; margin-bottom: 32px; text-align: center;">Designed to be safe by default</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 32px;">
      <div>
        <span style="font-size: 32px;">ğŸš«</span>
        <h3 style="margin: 16px 0 8px;">No silent actions</h3>
        <p style="color: #4a4a4a;">If you donâ€™t approve, it doesnâ€™t happen.</p>
      </div>
      <div>
        <span style="font-size: 32px;">ğŸ›¡ï¸</span>
        <h3 style="margin: 16px 0 8px;">Decisions are enforced</h3>
        <p style="color: #4a4a4a;">Kasbah is a checkpoint â€” not a suggestion popup.</p>
      </div>
      <div>
        <span style="font-size: 32px;">ğŸ«</span>
        <h3 style="margin: 16px 0 8px;">Single-use approvals</h3>
        <p style="color: #4a4a4a;">An approval canâ€™t be copied and replayed (when enforcement is enabled).</p>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="wrap footer">
    <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 24px;">
      <div>
        <span style="font-weight: 800; font-size: 24px;">ğŸ° Kasbah</span>
        <p style="margin-top: 8px; color: #5e5e5e;">Permission-first AI Â· Rabat, Morocco</p>
      </div>
      <div style="display: flex; gap: 32px;">
        <a href="https://github.com/Al-Adnane/Kasbah-Core" style="color: #4a4a4a; text-decoration: none;">GitHub</a>
        <a href="#" style="color: #4a4a4a; text-decoration: none;">Privacy</a>
        <a href="/dev.html" style="color: #4a4a4a; text-decoration: none;">Dev preview</a>
      </div>
    </div>
    <div style="margin-top: 40px; font-size: 14px; color: #6e6e6e; text-align: center;">
      Â© 2026 Kasbah. Open source (MIT). Built in public. <span style="display: inline-block; margin-left: 16px;">ğŸ‡²ğŸ‡¦</span>
    </div>
  </div>

  <script>
    // Waitlist: works now (no backend) by storing locally
    (function () {
      var form = document.getElementById("waitlist-form");
      var email = document.getElementById("waitlist-email");
      var status = document.getElementById("waitlist-status");
      if (!form || !email || !status) return;

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        var v = (email.value || "").trim();
        if (!v) return;
        try {
          var list = JSON.parse(localStorage.getItem("kasbah_waitlist") || "[]");
          if (!Array.isArray(list)) list = [];
          if (list.indexOf(v) === -1) list.push(v);
          localStorage.setItem("kasbah_waitlist", JSON.stringify(list));
          status.textContent = "âœ… Saved. (Local only until you wire the backend.)";
          email.value = "";
        } catch (err) {
          status.textContent = "Saved.";
        }
      });
    })();

    // PWA: SW registration (required for installability)
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/sw.js").catch(function(){});
    }

    // PWA: real install prompt wiring (Chrome/Edge/Android/Desktop)
    (function () {
      var installBtn = document.getElementById("pwa-install");
      var fallback = document.getElementById("pwa-fallback");
      var statusEl = document.getElementById("pwa-status");
      if (!installBtn || !fallback || !statusEl) return;

      var deferredPrompt = null;

      var isStandalone =
        (window.matchMedia && window.matchMedia("(display-mode: standalone)").matches) ||
        (window.navigator && window.navigator.standalone === true);

      if (isStandalone) {
        installBtn.style.display = "none";
        fallback.style.display = "none";
        statusEl.textContent = "âœ… Already installed.";
      }

      window.addEventListener("beforeinstallprompt", function (e) {
        e.preventDefault();
        deferredPrompt = e;
        installBtn.style.display = "inline-flex";
        fallback.style.display = "none";
        statusEl.textContent = "Ready to install.";
      });

      installBtn.addEventListener("click", function () {
        if (!deferredPrompt) return;
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then(function (choice) {
          deferredPrompt = null;
          statusEl.textContent = (choice && choice.outcome === "accepted") ? "âœ… Installingâ€¦" : "Install dismissed.";
        });
      });

      window.addEventListener("appinstalled", function () {
        installBtn.style.display = "none";
        fallback.style.display = "none";
        statusEl.textContent = "âœ… Installed.";
      });
    })();
  </script>

  <!-- NO FAKE DATA -->
</body>
</html>
